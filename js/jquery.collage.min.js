(function(a){a.fn.extend({collagize:function(b){var c={};var b=a.extend(c,b);return this.each(function(){var b=a(this);var c=a("div",b);var d=false;var e=1;c.each(function(){a(this).css("position","absolute");var b=Math.round(Math.random());if(b==1){var c=Math.floor(30*Math.random())+330}else{var c=Math.floor(30*Math.random())}var d=a(this).parent().width();var e=a(this).parent().height();var f=a(this).parent().offset();var g=[[f.left,f.top],[f.left+d-a(this).width(),f.top],[f.left+d-a(this).width(),f.top+e-a(this).height()],[f.left,f.top+e-a(this).height()]];var h=Math.random()*(d-a(this).width())+f.left;var i=Math.random()*(e-a(this).height())+f.top;var j={left:h,top:i,"-webkit-transform":"rotate("+c+"deg)","-moz-transform":"rotate("+c+"deg)",transform:"rotate("+c+"deg)"};a(this).css(j)});a(c).mouseup(function(b){if(!d){e++;var c={"z-index":e,transform:"rotate(0deg)","-moz-transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"};a(this).css(c)}});a(c).draggable({containment:"parent",cursor:"crosshair",start:function(b,c){d=true;e++;var f={"box-shadow":"#888 3px 4px 4px","-webkit-box-shadow":"#888 3px 4px 4px","-moz-box-shadow":"#888 3px 4px 4px","padding-left":"-4px","padding-top":"-4px","z-index":e};a(this).css(f)},stop:function(b,c){var e=Math.round(Math.random());if(e==1){var f=Math.floor(30*Math.random())+330}else{var f=Math.floor(30*Math.random())}var g={"box-shadow":"","-webkit-box-shadow":"","-moz-box-shadow":"",transform:"rotate("+f+"deg)","-webkit-transform":"rotate("+f+"deg)","-moz-transform":"rotate("+f+"deg)","margin-left":"0px","margin-top":"0px"};a(this).css(g);d=false}})})}})})(jQuery)
